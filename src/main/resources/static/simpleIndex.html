<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>种子库</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <style type="text/css">
        a {
            width: 23px;
            height: 23px;
            border: 1px solid #dce0e0;
            text-align: center;
            margin: 0 4px;
            cursor: pointer;
            display: inline-block;
        }

        .current {
            background-color: #5ac3e7;
        }
    </style>

</head>
<body style="background: #A3D0C3;">
<div style="text-align: center;">
    <input style="  height: 42px;  padding-left: 10px;  border: 2px solid #7BA7AB;  border-radius: 5px;  outline: none;  background: #F9F0DA;color: #9E9C9C;"
           id="searchInfo" type="text" placeholder="start search...">
    <button style="    height: 42px;width: 82px;" id="btn" type="submit" onclick="search()">搜索</button>
</div>
<div style="text-align: center;font-size: 20px;" id="data-list">
    <!--这里是列表-->
</div>
<div style="text-align: center;font-size: 20px;" id="data-list2">
    <li style="margin:10px auto;"> 555<em>5</em>555555</li>

    <!--这里是列表-->
</div>
<div>
    <template>
        <el-table
                :data="tableData"
                style="width: 100%">
            <el-table-column
                    prop="date"
                    label="日期"
                    width="180">
            </el-table-column>
            <el-table-column
                    prop="name"
                    label="姓名"
                    width="180">
            </el-table-column>
            <el-table-column
                    prop="address"
                    label="地址">
            </el-table-column>
        </el-table>
    </template>
</div>
<div style="text-align: center;font-size: 15px;" id="page"></div>
</body>
<!-- 引入样式 -->
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="http://luopq.com/demo/lib/jquery-1.10.2.min.js"></script>
<script type="text/javascript">

    export default {
        data() {
            return {
                tableData: [{
                    date: '2016-05-02',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1518 弄'
                }, {
                    date: '2016-05-04',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1517 弄'
                }, {
                    date: '2016-05-01',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1519 弄'
                }, {
                    date: '2016-05-03',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1516 弄'
                }]
            }
        }
    }

    var pageNumber = 1;
    var totalPage = 1;
    var pageSize = 500;

    let url = 'http://127.0.0.1:8888/seedTrade';


    window.onload = function () {
        console.log("页面初始化");
        this.getInfo(1);
    }

    function getInfo(page) {
        console.log("获取列表");
        let searchInfo = document.getElementById("searchInfo");
        let searchText = searchInfo.value;
        console.log(searchText);
        this.pageNumber = page;
        let that = this;
        $.get(url + "/seed?page=" + page + "&pageSize=" + pageSize + "&keyValue=" + searchText, function (data, status) {
            that.totalPage = data.totalPage;
            let rows = data.rows;
            let htmlString = "";
            for (i = 0; i < rows.length; i++) {
                htmlString += "\t<li style=\"margin:10px auto;\">" + rows[i].result + "</li>"
            }
            let list = document.getElementById("data-list");
            list.innerHTML = htmlString

        });

    }

    function search() {
        console.log("点击搜索");
        let searchInfo = document.getElementById("searchInfo");
        let searchText = searchInfo.value;
        console.log(searchText);
        this.pageNumber = 1;
        let that = this;
        $.get(url + "/seed?page=" + 1 + "&pageSize=" + pageSize + "&keyValue=" + searchText, function (data, status) {
            that.totalPage = data.totalPage;
            let rows = data.rows;
            let htmlString = "";
            for (i = 0; i < rows.length; i++) {
                htmlString += "\t<li style=\"margin:10px auto;\">" + rows[i].result + "</li>"
            }
            let list = document.getElementById("data-list");
            list.innerHTML = htmlString

        });
    }

</script>

</html>
